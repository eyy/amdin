webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},BmGP:function(t,e,n){"use strict";(function(t){var r=n("VjuZ");n.n(r);e["a"]={install:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};t.dict=r,e.prototype.___=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e[0];return r.hasOwnProperty(o)?o=r[o]:console.warn(o,"untranslated"),o.replace(a,function(t,n){return e[n]})},e.prototype.$setLang=function(e){r=e,t.dict=r,r._direction&&(document.body.dir=r._direction)},n.lang&&e.prototype.$setLang(n.lang)}};var a=/\$(\d)?/}).call(e,n("DuR2"))},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("EuXz");var r=n("/5sW"),a=n("IZMb"),o=n.n(a),u=n("BmGP"),s=n("/ocq"),i=(n("SldL"),n("7hDC")),l=n.n(i),c=(n("y9m4"),n("M4fF")),p="/admin/api/",d=new r["a"];function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.headers={"content-type":"application/json"},fetch(p+t,e).then(function(t){return t.json()}).then(function(t){return 500===t.status&&"ValidationError"!==t.name?Promise.reject(t):t}).catch(function(t){return d.$emit("error",t),t})}var h=Object(c["memoize"])(function(){return m()}),f=Object(c["memoize"])(function(t){return m(t+"/options")});function v(t){return m(t)}function _(t){return m(t+"/ref")}function b(t,e){return m(t,{method:"POST",body:JSON.stringify(e)})}function g(t,e){return m(t+"/"+e)}function x(t,e,n){return m(t+"/"+e,{method:"PUT",body:JSON.stringify(n)})}function w(t,e){return m(t+"/"+e,{method:"DELETE"})}var y={data:function(){return{models:[]}},created:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,n=e.models,this.models=n;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v(t._s(t.___("Welcome!")))]),t._l(t.models,function(e){return n("h2",{key:e.name},[n("router-link",{attrs:{to:e.name}},[t._v(t._s(e.plural))])],1)})],2)},$=[],j=n("XyMi"),O=!1,E=null,R=null,D=null,P=Object(j["a"])(y,k,$,O,E,R,D),C=P.exports,N=(n("fx22"),n("NM/j")),A=n.n(N),q={data:function(){return{model:"",opts:{},docs:[]}},beforeRouteEnter:function(){var t=l()(regeneratorRuntime.mark(function t(e,n,r){var a,o,u,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.params.model,t.next=3,Promise.all([f(a),v(a)]);case 3:o=t.sent,u=A()(o,2),s=u[0],i=u[1],r(function(t){t.model=a,t.opts=s,t.docs=i});case 8:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),methods:{del:function(){var t=l()(regeneratorRuntime.mark(function t(e,n){var r,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=this.docs[n][this.opts.title],a=this.realDel,o=this.___,this.$toasted.show(o("Are you sure you want to delete $1?",r),{duration:null,type:"error",action:[{text:o("Delete"),onClick:function(t,o){o.goAway(0),setTimeout(function(){return a(e,n,r)},500)}},{text:o("Never mind"),onClick:function(t,e){e.goAway(0)}}]});case 2:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),realDel:function(){var t=l()(regeneratorRuntime.mark(function t(e,n,r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w(this.model,e);case 2:if(a=t.sent,a.ok){t.next=5;break}return t.abrupt("return");case 5:this.docs.splice(n,1),this.$toasted.info(this.___("$1 was deleted.",r));case 7:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()}},L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[n("router-link",{attrs:{to:"/"}},[t._v(t._s(t.___("Admin")))]),t._v(" /\n    "+t._s(t.opts.plural)+"\n  ")],1),n("router-link",{attrs:{tag:"button",to:t.model+"/new"}},[t._v("\n    "+t._s(t.___("Add a new $1",t.opts.label))+"\n  ")]),t.docs.length?n("table",{attrs:{id:"list"}},[n("tr",[t._l(t.opts.list,function(e){return n("th",{key:e},[t._v("\n        "+t._s(t.opts.paths[e].label)+"\n      ")])}),n("th")],2),t._l(t.docs,function(e,r){return n("tr",{key:e._id},[t._l(t.opts.list,function(r){return n("td",{key:r},[r===t.opts.title?n("span",[n("router-link",{attrs:{to:t.model+"/"+e._id}},[t._v("\n            "+t._s(e[r])+"\n          ")])],1):n("span",[t._v("\n          "+t._s(e[r])+"\n        ")])])}),n("td",[n("router-link",{attrs:{tag:"button",to:t.model+"/"+e._id}},[t._v(t._s(t.___("Edit")))]),n("button",{staticClass:"danger",on:{click:function(n){n.preventDefault(),t.del(e._id,r)}}},[t._v(t._s(t.___("Delete")))])],1)],2)})],2):n("p",[n("strong",[t._v(t._s(t.___("No Documents.")))])])],1)},S=[];function M(t){n("Ns5s")}var T=!1,F=M,z=null,B=null,I=Object(j["a"])(q,L,S,T,F,z,B),U=I.exports;function H(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=J(t[n]));return e}function J(t){if(t.default)return t.default;if(t.enum)return t.enum[0];if(t.schema)return[];var e=t.type.toLowerCase();return"number"===e?t.min?t.min:0:null}var V={props:{doc:Object,paths:Object,submit:Function},data:function(){return{errors:{},saving:!1}},methods:{save:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.saving=!0,t.next=3,this.submit(this.doc);case 3:e=t.sent,this.saving=!1,n=this.___,500===e.status&&"ValidationError"===e.name?(this.errors=e.errors,console.error("error",e),this.$toasted.error(n("There was a problem :("))):(this.errors={},this.$toasted.success(n("Saved!")),this.$emit("saved",e));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[n("obj",{attrs:{paths:t.paths,value:t.doc,errors:t.errors}}),n("button",{attrs:{type:"submit",disabled:t.saving}},[t._v("\n    "+t._s(t.___("Save"))+"\n    "),t.saving?n("span",[t._v("...")]):t._e()]),t.errors?n("div",{staticClass:"error"},[t._v("\n    "+t._s(t.errors.message)+"\n  ")]):t._e()],1)},W=[];function X(t){n("v+LI")}var Y=!1,Z=X,K=null,Q=null,tt=Object(j["a"])(V,G,W,Y,Z,K,Q),et=tt.exports,nt={data:function(){return{model:"",opts:{paths:{}},doc:{}}},beforeRouteEnter:function(){var t=l()(regeneratorRuntime.mark(function t(e,n,r){var a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.params.model,t.next=3,f(a);case 3:o=t.sent,r(function(t){t.model=a,t.opts=o,t.doc=H(o.paths)});case 5:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),methods:{postDoc:b},components:{AForm:et}},rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[n("router-link",{attrs:{to:"/"}},[t._v(t._s(t.___("Admin")))]),t._v("\n    / "),n("router-link",{attrs:{to:"/"+t.model}},[t._v(t._s(t.opts.plural))]),t._v("\n    / "+t._s(t.___("New"))+"\n  ")],1),n("a-form",{attrs:{paths:t.opts.paths,doc:t.doc,submit:function(e){return t.postDoc(t.model,e)}},on:{saved:function(e){return t.$router.push({name:"edit",params:{model:t.model,id:e._id}})}}})],1)},at=[],ot=!1,ut=null,st=null,it=null,lt=Object(j["a"])(nt,rt,at,ot,ut,st,it),ct=lt.exports,pt={data:function(){return{model:"",id:null,opts:{paths:{}},doc:{}}},beforeRouteEnter:function(){var t=l()(regeneratorRuntime.mark(function t(e,n,r){var a,o,u,s,i,l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.params,o=a.model,u=a.id,t.next=3,Promise.all([f(o),g(o,u)]);case 3:s=t.sent,i=A()(s,2),l=i[0],c=i[1],r(function(t){t.model=o,t.id=u,t.opts=l,t.doc=c});case 8:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}(),methods:{putDoc:x},components:{AForm:et}},dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[n("router-link",{attrs:{to:"/"}},[t._v(t._s(t.___("Admin")))]),t._v("\n    / "),n("router-link",{attrs:{to:"/"+t.model}},[t._v(t._s(t.opts.plural))]),t._v("\n    / "),n("em",[t._v(t._s(t.doc[t.opts.title]||t.___("Untitled")))])],1),n("a-form",{attrs:{paths:t.opts.paths,doc:t.doc,submit:function(e){return t.putDoc(t.model,t.id,e)}}})],1)},mt=[],ht=!1,ft=null,vt=null,_t=null,bt=Object(j["a"])(pt,dt,mt,ht,ft,vt,_t),gt=bt.exports;r["a"].use(s["a"]);var xt=new s["a"]({routes:[{path:"/",name:"home",component:C},{path:"/:model",name:"list",component:U},{path:"/:model/new",name:"create",component:ct},{path:"/:model/:id",name:"edit",component:gt}]}),wt={data:function(){return{ready:!1}},created:function(){var t=l()(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:e=t.sent,n=e.conf,this.$setLang(n.lang),this.ready=!0,d.$on("error",function(t){r.$toasted.error(r.___("There was a problem :(")),console.error(t)});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.ready?n("router-view"):t._e()],1)},kt=[];function $t(t){n("wmkA")}var jt=!1,Ot=$t,Et=null,Rt=null,Dt=Object(j["a"])(wt,yt,kt,jt,Ot,Et,Rt),Pt=Dt.exports,Ct={props:["value","path"]},Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"text",required:t.path.required,maxlength:t.path.maxlength,minlength:t.path.minlength},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}})},At=[],qt=!1,Lt=null,St=null,Mt=null,Tt=Object(j["a"])(Ct,Nt,At,qt,Lt,St,Mt),Ft=Tt.exports,zt={props:["value","path"]},Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{attrs:{type:"text",required:t.path.required,maxlength:t.path.maxlength,minlength:t.path.minlength},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}})},It=[],Ut=!1,Ht=null,Jt=null,Vt=null,Gt=Object(j["a"])(zt,Bt,It,Ut,Ht,Jt,Vt),Wt=Gt.exports,Xt={props:{value:Boolean,path:Object}},Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"checkbox",required:t.path.required},domProps:{checked:t.value},on:{change:function(e){t.$emit("input",e.target.checked)}}})},Zt=[],Kt=!1,Qt=null,te=null,ee=null,ne=Object(j["a"])(Xt,Yt,Zt,Kt,Qt,te,ee),re=ne.exports,ae=n("LBze"),oe={mixins:[ae["ContainerMixin"]],render:function(t){return t("div",this.$slots.default)}},ue={mixins:[ae["ElementMixin"]],render:function(t){return t("div",this.$slots.default)}},se={props:{value:{type:Array,default:function(){return[]}},path:Object},computed:{here:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{add:function(){this.here=[H(this.path.schema)].concat(this.value)},remove:function(t){this.value.splice(t,1)}},components:{SortableList:oe,SortableItem:ue},directives:{handle:ae["HandleDirective"]}},ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.add(e)}}},[t._v("\n    "+t._s(t.___("Add"))+"\n  ")]),n("sortable-list",{attrs:{"lock-axis":"y","use-drag-handle":!0},model:{value:t.here,callback:function(e){t.here=e},expression:"here"}},t._l(t.here,function(e,r){return n("sortable-item",{key:e._id,staticClass:"box",attrs:{index:r}},[n("div",{staticClass:"controls"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.here.length>1,expression:"here.length > 1"}]},[n("a",{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"reorder",attrs:{href:"#"}},[t._v(t._s(t.___("Order")))]),t._v(",\n        ")]),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.remove(r)}}},[t._v(t._s(t.___("Remove")))])]),n("obj",{attrs:{paths:t.path.schema,value:t.here[r]}})],1)}))],1)},le=[];function ce(t){n("YCUa")}var pe=!1,de=ce,me=null,he=null,fe=Object(j["a"])(se,ie,le,pe,de,me,he),ve=fe.exports,_e={props:{value:String,path:Object}},be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.path.enum,function(e){return n("label",{key:e},[n("input",{attrs:{type:"radio",name:"paths"},domProps:{value:e,checked:e===t.value},on:{change:function(e){t.$emit("input",e.target.value)}}}),t._v("\n    "+t._s(e)+"\n  ")])}))},ge=[],xe=!1,we=null,ye=null,ke=null,$e=Object(j["a"])(_e,be,ge,xe,we,ye,ke),je=$e.exports,Oe={props:["value","path"]},Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"number",required:t.path.required,min:t.path.min,max:t.path.max},domProps:{value:t.value},on:{input:function(e){t.$emit("input",Number(e.target.value))}}})},Re=[],De=!1,Pe=null,Ce=null,Ne=null,Ae=Object(j["a"])(Oe,Ee,Re,De,Pe,Ce,Ne),qe=Ae.exports,Le={props:["value","path"]},Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"date",required:t.path.required},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}})},Me=[],Te=!1,Fe=null,ze=null,Be=null,Ie=Object(j["a"])(Le,Se,Me,Te,Fe,ze,Be),Ue=Ie.exports,He={props:{value:String,path:Object},data:function(){return{options:[]}},created:function(){var t=l()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_(this.path.ref);case 2:this.options=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("select",{on:{change:function(e){t.$emit("input",e.target.value)}}},[t.path.require?t._e():n("option"),t._l(t.options,function(e){return n("option",{key:e[0],domProps:{value:e[0],selected:e[0]===t.value}},[t._v("\n    "+t._s(e[1])+"\n  ")])})],2)},Ve=[],Ge=!1,We=null,Xe=null,Ye=null,Ze=Object(j["a"])(He,Je,Ve,Ge,We,Xe,Ye),Ke=Ze.exports,Qe={props:["value"]},tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v(t._s(t.value))])},en=[],nn=!1,rn=null,an=null,on=null,un=Object(j["a"])(Qe,tn,en,nn,rn,an,on),sn=un.exports;function ln(t){var e=t.field||t.type.toLowerCase();return!1===t.editable?sn:t.enum?je:t.ref?Ke:"boolean"===e?re:"array"===e?ve:"textarea"===e?Wt:"number"===e?qe:"date"===e?Ue:Ft}var cn={name:"obj",props:{value:Object,paths:Object,errors:{type:Object,default:function(){return{}}}},methods:{matchField:ln}},pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",t._l(t.paths,function(e,r){return n("tr",{key:r},[n("th",[t._v("\n      "+t._s(e.label)+"\n      "),e.required?n("span",{staticClass:"required"},[t._v("*")]):t._e()]),n("td",[n(t.matchField(e),{tag:"component",attrs:{path:e},model:{value:t.value[r],callback:function(e){t.$set(t.value,r,e)},expression:"value[name]"}}),t.errors[r]?n("span",{staticClass:"error"},[t._v("\n        "+t._s(t.errors[r].message)+"\n      ")]):t._e()],1)])}))},dn=[];function mn(t){n("eNdL")}var hn=!1,fn=mn,vn=null,_n=null,bn=Object(j["a"])(cn,pn,dn,hn,fn,vn,_n),gn=bn.exports;r["a"].component("obj",gn),r["a"].use(u["a"]),r["a"].use(o.a,{singleton:!0,duration:5e3,position:"bottom-center",className:"toasted-amdin",action:{text:"×",onClick:function(t,e){e.goAway(0)}}}),xt.afterEach(function(t,e){"create"===e.name&&"edit"===t.name||r["a"].toasted.clear()}),r["a"].config.productionTip=!1,new r["a"]({router:xt,render:function(t){return t(Pt)}}).$mount("#app")},Ns5s:function(t,e){},YCUa:function(t,e){},eNdL:function(t,e){},"v+LI":function(t,e){},wmkA:function(t,e){}},[0]);
//# sourceMappingURL=app.e91550a2.js.map